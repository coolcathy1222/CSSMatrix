<!DOCTYPE html>
<html>
<head>
	<style type="text/css">

	body {	background-color: #222; }

	div#container {
		webkit-perspective: 500px;
		webkit-perspective-origin: 50% 50%;
		webkit-transform-style: preserve-3d;
		padding: 25px;
		font-family: Courier;
		text-align: center;
	}

	div.cssmatrix {
		position: relative;
		height: 200px;
		width: 300px;
		background-color: #666;
	}
	
	div#custom {}

	div#webkit {}

	</style>
 	<script type="text/javascript" src="cssmatrix.js"></script>
	<script type="text/javascript">

	var inputs = [ 'rotate', 'translate', 'skewX', 'skewY', 'scale' ];

	window.onload = function(){
		
		var custom = document.getElementById('custom'),
			webkit = document.getElementById('webkit'),
			controls = document.getElementById('ctrl');

		for(var i=0;i<inputs.length;i++){
			var input = document.createElement('input');
			input.type = 'range'; input.value = 0; input.step = 0.1; input.min = -10; input.max = 10; input.name = inputs[i];

			span = document.createElement('span');
			span.innerText = inputs[i];
			controls.appendChild( span )
			controls.appendChild(input)
		}
	
		window.addEventListener('mousemove',function(e){

			var m1 = new WebKitCSSMatrix();

			// scale x1 and y1 to the interval (-1,1)
			var x1 = (e.x / window.innerWidth - 0.5 ) * 2,
				y1 = - (e.y / window.innerHeight - 0.5 ) * 2;

			webkit.style.webkitTransform = m1.translate(35*x1,-15*y1,0).toString();

			var m2 = new CSSMatrix();

			// scale x2 and y2 to the interval (-1,1)
			var x2 = (e.x / window.innerWidth - 0.5 ) * 2,
				y2 = - (e.y / window.innerHeight - 0.5 ) * 2;

			custom.style.webkitTransform = m2.translate(35*x2,-15*y2,0).toString();

		},false);

	}

	</script>
</head>
<body>

<div id="container">
	<div id="custom" class="cssmatrix">
		<h3>CSSMatrix Polyfill</h3>
		<table>
			<tbody>
				<tr><td>m11</td><td>m12</td><td>m13</td><td>m14</td></tr>
				<tr><td>m21</td><td>m22</td><td>m23</td><td>m24</td></tr>
				<tr><td>m31</td><td>m32</td><td>m33</td><td>m34</td></tr>
				<tr><td>m41</td><td>m42</td><td>m43</td><td>m44</td></tr>
			</tbody>
		</table>
	</div>
	<div id="webkit" class="cssmatrix">
		<h3>WebKitCSSMatrix</h3>
		<table>
			<tbody>
				<tr><td>m11</td><td>m12</td><td>m13</td><td>m14</td></tr>
				<tr><td>m21</td><td>m22</td><td>m23</td><td>m24</td></tr>
				<tr><td>m31</td><td>m32</td><td>m33</td><td>m34</td></tr>
				<tr><td>m41</td><td>m42</td><td>m43</td><td>m44</td></tr>
			</tbody>
		</table>
	</div>
</div>

<div id="ctrl">

</div>

	
</body>
</html>